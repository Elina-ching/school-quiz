<!doctype html>
<html lang="zh-Hant">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>台中私中選校互動報告｜衛道國中部 vs 明道國中部</title>
  <style>
    /* 基本樣式與平滑捲動 */
    :root{--ink:#1f2937;--muted:#6b7280;--brand:#2563eb;--panel:#fff;--shadow:0 10px 30px rgba(0,0,0,.08)}
    body{margin:0;font:16px/1.6 "Inter",system-ui,-apple-system,Segoe UI,Roboto,Noto Sans TC,"PingFang TC","Microsoft JhengHei",sans-serif;background:#f9fafb;color:var(--ink);scroll-behavior:smooth}
    .wrap{max-width:960px;margin:0 auto;padding:24px}
    h1{font-size:28px;margin-bottom:8px}
    h2{font-size:22px;margin-top:24px;color:#374151}
    h3{margin-top:16px;color:#111827}
    p{margin:8px 0}
    .muted{color:var(--muted);font-size:14px}

    /* 首頁兩校比較卡片 */
    .compare{display:grid;grid-template-columns:1fr 1fr;gap:20px;margin-top:16px}
    .card{background:var(--panel);border-radius:12px;padding:16px;box-shadow:0 4px 12px rgba(0,0,0,0.05)}
    .btn{display:inline-block;margin-top:24px;padding:12px 18px;background:var(--brand);color:#fff;font-weight:700;border-radius:8px;text-decoration:none}

    /* 回頂端按鈕 */
    .backtop{position:fixed;bottom:20px;right:20px;padding:12px 16px;background:#0f172a;color:#fff;border-radius:50%;font-size:20px;text-decoration:none;box-shadow:0 4px 12px rgba(0,0,0,0.2)}
    .backtop:hover::after{content:" 返回報告";margin-left:6px;font-size:14px;color:#fff}

    /* 互動測驗版面與元件（完整版） */
    .grid{display:grid;gap:14px}
    @media(min-width:840px){.grid{grid-template-columns:1.1fr 1fr}}
    .kpis{display:grid;grid-template-columns:repeat(2,1fr);gap:12px;margin-top:12px}
    .kpi{background:#f3f4f6;border-radius:12px;padding:10px}
    .kpi small{display:block;color:var(--muted)}
    .kpi b{font-size:20px}
    .progress{height:10px;background:#e5e7eb;border-radius:999px;overflow:hidden}
    .bar{height:100%;width:0;background:linear-gradient(90deg,#2563eb,#22c55e);transition:width .25s ease}
    fieldset{border:0;margin:0;padding:0}
    .question{padding:16px 0;border-top:1px dashed #e5e7eb}
    .question legend{font-weight:800;margin-bottom:12px}
    .options{display:grid;gap:10px}
    .opt{display:flex;align-items:flex-start;gap:10px;background:#f8fafc;border:1px solid #e5e7eb;padding:10px;border-radius:12px;cursor:pointer;transition:transform .05s}
    .opt:hover{transform:translateY(-1px)}
    input[type="radio"],input[type="checkbox"]{margin-top:3px}
    .result{display:grid;gap:8px}
    .pill{display:inline-flex;align-items:center;gap:8px;background:#111827;color:#fff;border-radius:999px;padding:8px 12px;font-weight:800}
    .pill.wd{background:#111827}
    .pill.md{background:#0f172a}
    .meter{display:grid;grid-template-columns:1fr 1fr;gap:8px}
    .meter > div{background:#f3f4f6;border-radius:12px;padding:8px}
    .meter .w{height:10px;border-radius:999px;background:linear-gradient(90deg,#111827,#6b7280)}
    .meter .m{height:10px;border-radius:999px;background:linear-gradient(90deg,#0f172a,#64748b)}
    .tags{display:flex;gap:8px;flex-wrap:wrap}
    .tag{background:#eef2ff;color:#3730a3;border-radius:999px;padding:6px 10px;font-weight:700}
    .toolbar{display:flex;gap:8px;flex-wrap:wrap}
    button{appearance:none;border:0;background:#2563eb;color:#fff;padding:10px 14px;border-radius:12px;font-weight:800;cursor:pointer;box-shadow:var(--shadow)}
    button.secondary{background:#0f172a}
    button.ghost{background:#f3f4f6;color:#111827}
  </style>
</head>
<body>
<div class="wrap" id="top">
  <h1>🎓 台中私中選校分析報告</h1>
  <p class="muted">衛道國中部 vs 明道國中部｜基本比較</p>

  <div class="compare">
    <div class="card">
      <h2>🛡️ 衛道國中部</h2>
      <h3>硬體設備</h3>
      <p>校園完整，有圖書館、科學實驗室、宿舍、美術與多媒體教室、風雨球場，環境偏傳統而穩定。</p>
      <h3>校風氛圍</h3>
      <p>偏向嚴謹，讀書風氣濃厚，同儕之間會互相帶動學習，適合自律或內向型孩子。</p>
      <h3>升學表現</h3>
      <p>頂尖高中錄取率約 24–30%，與明道相近，競爭力不俗。</p>
      <h3>招生情況</h3>
      <p>報考人數眾多，錄取率低（約20%），屬台中熱門私校之一。</p>
    </div>

    <div class="card">
      <h2>🏛️ 明道國中部</h2>
      <h3>硬體設備</h3>
      <p>設備豐富：室內溫水游泳池、觀星臺、攀岩場、生態池等，校園資源明顯優於多數私校。</p>
      <h3>校風氛圍</h3>
      <p>多元、活潑，社團與活動非常豐富，學生自我意識強，自信心高。</p>
      <h3>升學表現</h3>
      <p>頂尖高中錄取率約 23–28%，與衛道差距不大，但課業進度更快。</p>
      <h3>招生情況</h3>
      <p>同樣是熱門私校，常吸引大量家長青睞，競爭也激烈。</p>
    </div>
  </div>

  <a href="#quiz-section" class="btn">➡️ 開始互動小測驗</a>
</div>

<hr style="margin:40px 0;border:0;border-top:1px solid #e5e7eb" />

<div class="wrap" id="quiz-section">
  <h2>📋 互動小測驗</h2>
  <p class="muted">依你的勾選即時計分，幫你看見「更像哪間」。沒有對錯，只有更合身。</p>

  <div class="grid">
    <section class="card">
      <div class="kpis">
        <div class="kpi"><small>作答進度</small><b id="progress-text">0/0</b><div class="progress" aria-hidden="true"><div id="progress-bar" class="bar"></div></div></div>
        <div class="kpi"><small>目前傾向</small><b id="tendency">—</b></div>
      </div>

      <form id="quiz" aria-describedby="helper">
        <p id="helper" class="muted">提示：每題選 1 項。結果會自動更新。</p>

        <fieldset class="question" data-q="1">
          <legend>1) 地點便利性</legend>
          <div class="options">
            <label class="opt"><input type="radio" name="q1" value="md1" data-wd="0" data-md="1" /> 我家在烏日或明道附近（距離優勢）</label>
            <label class="opt"><input type="radio" name="q1" value="both1" data-wd="0" data-md="0" /> 交通不拘，只要校風合適</label>
          </div>
        </fieldset>

        <fieldset class="question" data-q="2">
          <legend>2) 孩子的學習特質</legend>
          <div class="options">
            <label class="opt"><input type="radio" name="q2" value="wd2" data-wd="1" data-md="0" /> 自律、能安靜讀書（需要穩定讀書氛圍）</label>
            <label class="opt"><input type="radio" name="q2" value="md2" data-wd="0" data-md="1" /> 喜歡活動、需要多元舞台</label>
            <label class="opt"><input type="radio" name="q2" value="wd2b" data-wd="1" data-md="0" /> 自我要求高，想要嚴謹督促</label>
          </div>
        </fieldset>

        <fieldset class="question" data-q="3">
          <legend>3) 家庭陪伴程度</legend>
          <div class="options">
            <label class="opt"><input type="radio" name="q3" value="both3" data-wd="0" data-md="0" /> 家長能積極介入課業（兩校皆可）</label>
            <label class="opt"><input type="radio" name="q3" value="wd3" data-wd="1" data-md="0" /> 家長較忙，需要環境自動帶動（同儕讀書風氣）</label>
          </div>
        </fieldset>

        <fieldset class="question" data-q="4">
          <legend>4) 孩子的性格</legend>
          <div class="options">
            <label class="opt"><input type="radio" name="q4" value="wd4" data-wd="1" data-md="0" /> 內向安靜（怕被活動拉走注意力）</label>
            <label class="opt"><input type="radio" name="q4" value="md4" data-wd="0" data-md="1" /> 外向活潑（喜歡舞台與社團）</label>
          </div>
        </fieldset>

        <fieldset class="question" data-q="5">
          <legend>5) 升學取向</legend>
          <div class="options">
            <label class="opt"><input type="radio" name="q5" value="both5" data-wd="0" data-md="0" /> 目標頂尖高中（兩校皆具備條件）</label>
            <label class="opt"><input type="radio" name="q5" value="md5" data-wd="0" data-md="1" /> 想要多才多藝＋升學兼顧</label>
          </div>
        </fieldset>

        <fieldset class="question" data-q="6">
          <legend>6) 課業節奏承受度</legend>
          <div class="options">
            <label class="opt"><input type="radio" name="q6" value="wd6" data-wd="1" data-md="0" /> 偏好穩定、聚焦讀書的節奏</label>
            <label class="opt"><input type="radio" name="q6" value="md6" data-wd="0" data-md="1" /> 能適應活動多、進度快的環境</label>
          </div>
        </fieldset>

        <fieldset class="question" data-q="7">
          <legend>7) 校風偏好</legend>
          <div class="options">
            <label class="opt"><input type="radio" name="q7" value="wd7" data-wd="1" data-md="0" /> 喜歡規範明確、宗教背景的穩定感</label>
            <label class="opt"><input type="radio" name="q7" value="md7" data-wd="0" data-md="1" /> 更在意設施齊全、活動舞台與資源</label>
          </div>
        </fieldset>

        <details class="question">
          <summary>進階加權（可選）</summary>
          <div class="options" style="margin-top:10px">
            <label class="opt"><input type="checkbox" id="w-distance-md" data-wd="0" data-md="1" /> 距離優先（家住明道附近）</label>
            <label class="opt"><input type="checkbox" id="w-stability-wd" data-wd="1" data-md="0" /> 課程穩定優先（少分心、少活動）</label>
          </div>
        </details>
      </form>

      <div class="toolbar" style="margin-top:14px">
        <button type="button" class="ghost" id="reset">重設</button>
        <button type="button" class="secondary" id="share">複製結果連結</button>
        <button type="button" id="print">匯出 PDF（列印）</button>
      </div>

    </section>

    <aside class="card result" aria-live="polite" aria-atomic="true">
      <div style="display:flex;align-items:center;gap:8px;flex-wrap:wrap">
        <span class="pill wd" id="wd-pill">🛡️ 衛道分數 <span id="wd-score">0</span></span>
        <span class="pill md" id="md-pill">🏛️ 明道分數 <span id="md-score">0</span></span>
      </div>

      <div class="meter">
        <div>
          <div style="display:flex;justify-content:space-between"><small>衛道</small><small id="wd-percent">0%</small></div>
          <div class="w" id="wd-meter"></div>
        </div>
        <div>
          <div style="display:flex;justify-content:space-between"><small>明道</small><small id="md-percent">0%</small></div>
          <div class="m" id="md-meter"></div>
        </div>
      </div>

      <div>
        <h3 style="margin:10px 0 6px">建議結果</h3>
        <div id="advice" class="tags"></div>
        <p id="advice-text" class="muted">尚未作答，先從第一題開始。</p>
      </div>

      <details>
        <summary>校園重點摘要（點開看）</summary>
        <div style="margin-top:8px">
          <p><b>衛道：</b>氛圍嚴謹、讀書風氣濃、同儕自動帶動、課程穩定。</p>
          <p><b>明道：</b>設備與活動資源豐富、舞台多、進度快、需自我時間管理。</p>
          <p class="muted">※ 小測驗僅供參考，最終仍建議實地參訪、與在校家長與學生交流。</p>
        </div>
      </details>
    </aside>
  </div>

  <p class="muted" style="margin-top:16px">製作：互動式選校小測驗（ELINA 專用）。資料屬性為一般觀察，非官方排名。</p>

  <!-- 新增：結果出來後的討論建議 -->
  <section class="card" id="post-discussion" style="margin-top:18px">
    <h2>💬 結果出來後，可以怎麼討論？</h2>
    <ol>
      <li><b>先聽孩子：</b> 問問孩子為什麼選了某個選項，他的理由通常比分數更真實。</li>
      <li><b>對比想像與現場：</b> 拿著結果去兩校參訪，看看現場氛圍與問卷想像是否一致。</li>
      <li><b>聊聊家庭節奏：</b> 選校會影響全家生活（通勤、陪讀、活動參與），先說清楚家裡能給多少時間。</li>
      <li><b>設「試探期」：</b> 若仍難抉擇，以一學期為觀察期，觀察孩子適應，再決定是否調整。</li>
      <li><b>記住沒有完美選項：</b> 追求「更合身」而非「完美」，每校都有優缺點。</li>
    </ol>
  </section>
</div>

<a href="#top" class="backtop" title="返回頂端">⬆️</a>

<script>
(function(){
  const form = document.getElementById('quiz');
  const questions = Array.from(form.querySelectorAll('.question fieldset'));
  const progressText = document.getElementById('progress-text');
  const progressBar = document.getElementById('progress-bar');
  const wdScoreEl = document.getElementById('wd-score');
  const mdScoreEl = document.getElementById('md-score');
  const wdMeter = document.getElementById('wd-meter');
  const mdMeter = document.getElementById('md-meter');
  const wdPercent = document.getElementById('wd-percent');
  const mdPercent = document.getElementById('md-percent');
  const tendencyEl = document.getElementById('tendency');
  const advice = document.getElementById('advice');
  const adviceText = document.getElementById('advice-text');

  const resetBtn = document.getElementById('reset');
  const shareBtn = document.getElementById('share');
  const printBtn = document.getElementById('print');

  const allInputs = Array.from(form.querySelectorAll('input'));

  const totalQs = questions.length; // 7
  progressText.textContent = `0/${totalQs}`;

  function collectScores(){
    let wd = 0, md = 0, answered = 0;
    const reasons = [];

    // radio fieldsets
    for(const fs of questions){
      const sel = fs.querySelector('input:checked');
      if(sel){
        answered++;
        const w = Number(sel.getAttribute('data-wd')||0);
        const m = Number(sel.getAttribute('data-md')||0);
        wd += w; md += m;
        if(w>m){reasons.push({label: sel.parentElement.textContent.trim(), school:'wd'});} 
        else if(m>w){reasons.push({label: sel.parentElement.textContent.trim(), school:'md'});} 
        else {reasons.push({label: sel.parentElement.textContent.trim(), school:'both'});}        
      }
    }

    // advanced weights
    form.querySelectorAll('details input[type="checkbox"]').forEach(cb=>{
      if(cb.checked){
        const w = Number(cb.getAttribute('data-wd')||0);
        const m = Number(cb.getAttribute('data-md')||0);
        wd += w; md += m;
        reasons.push({label: cb.parentElement.textContent.trim(), school: w>m? 'wd': (m>w?'md':'both')});
      }
    })

    return {wd, md, answered, reasons};
  }

  function render(){
    const {wd, md, answered, reasons} = collectScores();

    // progress
    progressText.textContent = `${answered}/${totalQs}`;
    progressBar.style.width = `${Math.round(answered/totalQs*100)}%`;

    // numbers
    wdScoreEl.textContent = wd;
    mdScoreEl.textContent = md;

    const sum = Math.max(1, wd+md);
    wdMeter.style.width = `${Math.round(wd/sum*100)}%`;
    mdMeter.style.width = `${Math.round(md/sum*100)}%`;
    wdPercent.textContent = `${Math.round(wd/sum*100)}%`;
    mdPercent.textContent = `${Math.round(md/sum*100)}%`;

    // tendency
    let t = '—';
    if(wd>md) t = '🛡️ 傾向：衛道';
    else if(md>wd) t = '🏛️ 傾向：明道';
    else if(wd===0 && md===0) t = '—';
    else t = '⚖️ 兩校均衡（看距離／校風偏好）';
    tendencyEl.textContent = t;

    // advice tags
    advice.innerHTML = '';
    reasons.slice(0,8).forEach(r=>{
      const span = document.createElement('span');
      span.className = 'tag';
      span.textContent = (r.school==='wd'?'🛡️ ':'🏛️ ') + r.label;
      if(r.school==='both') span.textContent = '🎯 ' + r.label;
      advice.appendChild(span);
    });

    // advice paragraph
    if(wd===0 && md===0){
      adviceText.textContent = '尚未作答，先從第一題開始。';
    } else if(wd>md){
      adviceText.textContent = '建議優先考慮「衛道國中部」。理由：你偏好穩定讀書氛圍、同儕帶動、自律或內向型孩子較自在。若距離遠，請再衡量通勤成本。';
    } else if(md>wd){
      adviceText.textContent = '建議優先考慮「明道國中部」。理由：你看重活動與資源、多元舞台、能適應較快節奏。請同步規劃時間管理以維持學業表現。';
    } else {
      adviceText.textContent = '兩校皆可成就孩子。接下來以「距離便利、校園氛圍喜好、社團資源需求」排序實地走訪，比一比最直觀的感受。';
    }

    // update URL for share
    updateURL();
  }

  function updateURL(){
    const params = new URLSearchParams();
    // radios
    questions.forEach(fs=>{
      const name = fs.querySelector('input[type="radio"]').name;
      const sel = fs.querySelector('input:checked');
      if(sel) params.set(name, sel.value);
    })
    // checkboxes
    form.querySelectorAll('details input[type="checkbox"]').forEach(cb=>{
      params.set(cb.id, cb.checked ? '1':'0');
    })
    const newURL = `${location.pathname}?${params.toString()}`;
    history.replaceState(null, '', newURL);
  }

  function restoreFromURL(){
    const qs = new URLSearchParams(location.search);
    if(!qs.size) return;
    // radios
    questions.forEach(fs=>{
      const name = fs.querySelector('input[type="radio"]').name;
      const val = qs.get(name);
      if(val){
        const el = fs.querySelector(`input[value="${CSS.escape(val)}"]`);
        if(el) el.checked = true;
      }
    })
    // checkboxes
    form.querySelectorAll('details input[type="checkbox"]').forEach(cb=>{
      const v = qs.get(cb.id);
      if(v==='1') cb.checked = true;
    })
  }

  // listeners
  form.addEventListener('change', render);
  resetBtn.addEventListener('click', ()=>{
    allInputs.forEach(i=>{ if(i.type==='radio' || i.type==='checkbox'){ i.checked=false; } });
    history.replaceState(null,'', location.pathname);
    render();
  });
  shareBtn.addEventListener('click', async ()=>{
    try{
      await navigator.clipboard.writeText(location.href);
      shareBtn.textContent = '已複製連結！';
      setTimeout(()=>shareBtn.textContent='複製結果連結',1600);
    }catch{
      alert('複製失敗，請手動複製網址列。');
    }
  });
  printBtn.addEventListener('click', ()=>window.print());

  // init
  restoreFromURL();
  render();
})();
</script>
</body>
</html>
